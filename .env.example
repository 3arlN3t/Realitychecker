# ============================================================================
# Reality Checker WhatsApp Bot - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# All REQUIRED variables must be set for the application to start

# ============================================================================
# REQUIRED: OpenAI Configuration
# ============================================================================
# Get your API key from: https://platform.openai.com/api-keys
# The API key must start with 'sk-' and be a valid OpenAI API key
OPENAI_API_KEY=sk

# Optional: OpenAI model to use (default: gpt-4)
OPENAI_MODEL=gpt-4

# Optional: OpenAI analysis settings for fine-tuning
# Temperature controls randomness (0.0-1.0, lower = more consistent)
OPENAI_TEMPERATURE=0.3

# Maximum tokens in OpenAI response (default: 1000)
OPENAI_MAX_TOKENS=1000

# API request timeout in seconds (default: 30.0)
OPENAI_TIMEOUT=30.0

# ============================================================================
# REQUIRED: Twilio Configuration  
# ============================================================================
# Get these from your Twilio Console: https://console.twilio.com/
# Account SID starts with 'AC' followed by 32 characters
TWILIO_ACCOUNT_SID=AC

# Auth Token is a 32-character string from your Twilio Console
TWILIO_AUTH_TOKEN=

# Your Twilio WhatsApp phone number (format: +1234567890)
TWILIO_PHONE_NUMBER=

# ============================================================================
# OPTIONAL: Application Configuration
# ============================================================================
# Maximum PDF file size in MB (default: 10)
MAX_PDF_SIZE_MB=10

# Logging level: DEBUG, INFO, WARNING, ERROR (default: INFO)
LOG_LEVEL=INFO

# Enable Twilio webhook signature validation (default: true)
# Set to false only for development/testing
WEBHOOK_VALIDATION=true

# ============================================================================
# AUTHENTICATION Configuration
# ============================================================================
# JWT secret key for token signing (CHANGE IN PRODUCTION!)
JWT_SECRET_KEY=your-secret-key-change-in-production

# JWT token expiry in hours (default: 24)
JWT_EXPIRY_HOURS=24

# JWT refresh token expiry in days (default: 7)
JWT_REFRESH_EXPIRY_DAYS=7

# Default admin user credentials (CHANGE IN PRODUCTION!)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123

# Optional analyst user credentials
ANALYST_USERNAME=
ANALYST_PASSWORD=

# ============================================================================
# OPTIONAL: Development Configuration
# ============================================================================
# Enable development mode (default: false)
DEVELOPMENT_MODE=false

# Use mock Twilio for testing (default: false)
USE_MOCK_TWILIO=false

# ============================================================================
# OPTIONAL: Database Configuration
# ============================================================================
# Database URL (default: SQLite in data directory)
DATABASE_URL=sqlite:///data/reality_checker.db

# For PostgreSQL:
# DATABASE_URL=postgresql://user:password@localhost:5432/reality_checker

# ============================================================================
# OPTIONAL: Redis Configuration
# ============================================================================
# Redis URL for caching and rate limiting (optional)
REDIS_URL=redis://localhost:6379/0

# Redis Connection Pool Settings
REDIS_POOL_SIZE=20
REDIS_MAX_CONNECTIONS=50
REDIS_CONNECTION_TIMEOUT=5.0
REDIS_SOCKET_TIMEOUT=5.0
REDIS_RETRY_ATTEMPTS=3
REDIS_RETRY_BACKOFF=1.0
REDIS_HEALTH_CHECK_INTERVAL=30
REDIS_CIRCUIT_BREAKER_THRESHOLD=5
REDIS_CIRCUIT_BREAKER_TIMEOUT=60

# Redis Memory Settings
REDIS_MAXMEMORY=256mb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_TIMEOUT=300
REDIS_TCP_KEEPALIVE=300

# ============================================================================
# OPTIONAL: CORS and Security Configuration
# ============================================================================
# Allowed CORS origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# Rate limiting configuration
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# OPTIONAL: Performance Tuning Configuration
# ============================================================================
# Webhook Performance Settings
WEBHOOK_TIMEOUT=2.0
WEBHOOK_ACKNOWLEDGMENT_TIMEOUT=0.5

# Task Queue Configuration
TASK_QUEUE_MAX_SIZE=1000
TASK_QUEUE_WORKER_COUNT=5
TASK_QUEUE_BATCH_SIZE=10
TASK_PROCESSING_TIMEOUT=30
TASK_RETRY_ATTEMPTS=3
TASK_RETRY_BACKOFF=2.0

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_ALERT_THRESHOLD_WEBHOOK=1.0
PERFORMANCE_ALERT_THRESHOLD_CRITICAL=3.0

# Connection Pool Optimization
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
